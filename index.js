(function(r,g,o,l,e,a,i){"use strict";function f(){return l.React.createElement(i.Forms.FormSection,{title:"Read All Messages"},l.React.createElement(i.Forms.FormSwitchRow,{label:"Enable 'Read All Messages' Overlay Button",value:a.storage.enableReadAll,onValueChange:function(n){a.storage.enableReadAll=n}}))}let s;const h=function(){try{e.showToast("Loading Read All Messages Plugin...",{type:"info"});const n=o.findByProps("ack","ackMessage");if(!n){e.showToast("Failed to find Discord functions.",{type:"danger"});return}const d=o.findByName("QuickActions");if(!d){e.showToast("Failed to find Quick Settings UI.",{type:"danger"});return}a.storage.enableReadAll===void 0&&(a.storage.enableReadAll=!0),s=g.after("default",d,function(A,c){let[E]=A;return!c?.props?.children||!a.storage.enableReadAll||c.props.children.unshift(l.React.createElement(d.Button,{label:"\u{1F4E9} Read All",onPress:function(){try{const t=o.findByProps("getMutableGuilds")?.getMutableGuilds?.();if(!t)return;Object.keys(t).forEach(function(b){const u=t[b]?.channels?.find?.(function(m){return m.is_read===!1})?.id;u&&n.ack(u)}),e.showToast("All messages marked as read!",{type:"success"})}catch(t){console.error("[Read All] Error:",t),e.showToast("Error marking messages as read.",{type:"danger"})}}})),c})}catch(n){console.error("[Read All] Plugin Load Error:",n),e.showToast("Plugin Load Failed!",{type:"danger"})}},y=function(){try{s&&(s(),e.showToast("Plugin Successfully Unloaded!",{type:"success"}))}catch(n){console.error("[Read All] Unload Error:",n),e.showToast("Error during Unload!",{type:"danger"})}},R=f;return r.onLoad=h,r.onUnload=y,r.settings=R,r})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.plugin,vendetta.ui.components);
