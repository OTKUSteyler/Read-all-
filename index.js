(function(l,g,o,e,a,n){"use strict";const f=function(){const[t,s]=e.React.useState(n.storage.enableReadAll??!0);return e.React.createElement(e.ReactNative.View,{style:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#1E1E1E",padding:20}},e.React.createElement(e.ReactNative.Text,{style:{color:"#FFFFFF",fontSize:18,fontWeight:"bold",marginBottom:20}},"\u{1F4E9} Read All Messages Plugin"),e.React.createElement(e.ReactNative.Switch,{value:t,onValueChange:function(i){s(i),n.storage.enableReadAll=i}}),e.React.createElement(e.ReactNative.Text,{style:{color:"#AAAAAA",marginTop:10}},t?"\u2705 Enabled":"\u274C Disabled"))};let d;const R=function(){try{a.showToast("Loading Read All Messages Plugin...",{type:"info"});const t=o.findByProps("ack","ackMessage");if(!t||!t.ack){a.showToast("Failed to find Discord message functions.",{type:"danger"}),console.error("[Read All] Missing ack function in ChannelActions:",t);return}const s=o.findByProps("Guilds","GuildsList");if(!s?.Guilds){a.showToast("Failed to find the server list UI.",{type:"danger"});return}n.storage.enableReadAll===void 0&&(n.storage.enableReadAll=!0),d=g.after("Guilds",s,function(i,c){let[b]=i;return!c?.props?.children||!n.storage.enableReadAll||c.props.children.unshift(e.React.createElement(e.ReactNative.View,{style:{position:"absolute",bottom:20,right:20,backgroundColor:"#5865F2",padding:12,borderRadius:8,elevation:5,alignItems:"center"}},e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:function(){try{const r=o.findByProps("getMutableGuilds")?.getMutableGuilds?.();if(!r)return;Object.keys(r).forEach(function(A){const u=r[A]?.channels?.find?.(function(E){return!E.is_read});u?.id&&t.ack(u.id)}),a.showToast("All messages marked as read!",{type:"success"})}catch(r){console.error("[Read All] Error marking messages:",r),a.showToast("Error marking messages as read.",{type:"danger"})}}},e.React.createElement(e.ReactNative.Text,{style:{color:"#FFFFFF",fontWeight:"bold"}},"\u{1F4E9} Read All")))),c})}catch(t){console.error("[Read All] Plugin Load Error:",t),a.showToast("Plugin Load Failed!",{type:"danger"})}},h=function(){try{d&&(d(),a.showToast("Plugin Successfully Unloaded!",{type:"success"}))}catch(t){console.error("[Read All] Unload Error:",t),a.showToast("Error during Unload!",{type:"danger"})}},y=f;return l.onLoad=R,l.onUnload=h,l.settings=y,l})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.plugin);
