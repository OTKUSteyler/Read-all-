(function(a,A,r,n,o,t,y){"use strict";const m=function(){const e=t.storage.enableReadAll??!0,l=function(){t.storage.enableReadAll=!e};return React.createElement(n.View,{style:{padding:16}},React.createElement(n.Text,{style:{fontSize:16,fontWeight:"bold",marginBottom:8}},"Read All Settings"),React.createElement(n.View,{style:{flexDirection:"row",alignItems:"center",marginBottom:16}},React.createElement(n.Text,{style:{flex:1}},'Enable "Read All" Functionality'),React.createElement(y.Switch,{value:e,onValueChange:l})))};let c;const E=function(){try{console.log("[Read All] Searching for message-related functions...");const e=r.metro.modules[12345]?.exports;if(console.log("[Read All] Found MessageActions:",e),!e){console.error("[Read All] Failed to find MessageActions."),o.showToast("Error: Message functions not found!",{type:"danger"});return}const l=e.ack||e.ackMessage||e.markRead;if(!l){console.error("[Read All] No valid function found for marking messages as read."),o.showToast("Error: No valid message acknowledgment function found.",{type:"danger"});return}const g=r.metro.findByProps("Guilds","GuildsList");if(!g?.Guilds){console.error("[Read All] 'Guilds' component not found."),o.showToast("Failed to find the server list UI.",{type:"danger"});return}t.storage.enableReadAll===void 0&&(t.storage.enableReadAll=!0),c=A.after("Guilds",g,function(w,s){let[T]=w;if(!s?.props?.children||!t.storage.enableReadAll)return s;const F=n.React.createElement(n.ReactNative.TouchableOpacity,{onPress:function(){try{console.log("[Read All] Fetching all guilds...");const d=r.metro.findByProps("getGuilds");if(!d){console.error("[Read All] GuildStore not found."),o.showToast("Error: Guilds not found!",{type:"danger"});return}const f=d.getGuilds();if(!f){console.error("[Read All] No guilds found."),o.showToast("Error: No guilds found!",{type:"danger"});return}Object.values(f).forEach(function(i){console.log(`[Read All] Processing guild: ${i.id} - ${i.name}`);const R=r.metro.findByProps("getChannels");if(!R){console.error("[Read All] ChannelStore not found.");return}const h=R.getChannels(i.id);if(!h){console.error(`[Read All] No channels found for guild ${i.id}`);return}Object.values(h).forEach(function(u){u.is_read||(console.log(`[Read All] Marking channel ${u.id} as read.`),l(u.id))})}),o.showToast("All messages marked as read!",{type:"success"})}catch(d){console.error("[Read All] Error marking messages as read:",d),o.showToast("Error marking messages as read.",{type:"danger"})}},style:{marginBottom:10,padding:10,backgroundColor:"#5865F2",borderRadius:8,alignItems:"center"}},n.React.createElement(n.ReactNative.Text,{style:{color:"#FFFFFF",fontWeight:"bold"}},"\u{1F4E9} Read All"));return s.props.children.unshift(F),s}),console.log("[Read All] Plugin loaded successfully.")}catch(e){console.error("[Read All] Plugin Load Error:",e),o.showToast("Plugin Load Failed!",{type:"danger"})}},p=function(){try{c&&(c(),o.showToast("Plugin Successfully Unloaded!",{type:"success"}))}catch(e){console.error("[Read All] Unload Error:",e),o.showToast("Error during Unload!",{type:"danger"})}},v=m;return a.onLoad=E,a.onUnload=p,a.settings=v,a})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.plugin,vendetta.ui.components);
