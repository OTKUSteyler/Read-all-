(function(l,g,i,e,a,n){"use strict";const f=function(){const[t,o]=e.React.useState(n.storage.enableReadAll??!0);return e.React.createElement(e.ReactNative.View,{style:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#1E1E1E",padding:20}},e.React.createElement(e.ReactNative.Text,{style:{color:"#FFFFFF",fontSize:18,fontWeight:"bold",marginBottom:20}},"\u{1F4E9} Read All Messages Plugin"),e.React.createElement(e.ReactNative.Switch,{value:t,onValueChange:function(s){o(s),n.storage.enableReadAll=s}}),e.React.createElement(e.ReactNative.Text,{style:{color:"#AAAAAA",marginTop:10}},t?"\u2705 Enabled":"\u274C Disabled"))};let d;const R=function(){try{a.showToast("Loading Read All Messages Plugin...",{type:"info"});const t=i.findByProps("bulkAck","ack","ackMessage","setReadState");if(!t||typeof t.ack!="function"){console.log("[Read All] \u274C Could not find `ack` function, plugin may not work."),a.showToast("\u274C Discord function lookup failed! Plugin may not work.",{type:"danger"});return}const o=i.findByProps("Guilds","GuildsList");if(!o?.Guilds){a.showToast("\u274C Failed to find the server list UI.",{type:"danger"});return}n.storage.enableReadAll===void 0&&(n.storage.enableReadAll=!0),d=g.after("Guilds",o,function(s,c){let[E]=s;return!c?.props?.children||!n.storage.enableReadAll||c.props.children.unshift(e.React.createElement(e.ReactNative.View,{style:{position:"absolute",bottom:20,right:20,backgroundColor:"#5865F2",padding:12,borderRadius:50,alignItems:"center",elevation:5}},e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:function(){try{const r=i.findByProps("getMutableGuilds")?.getMutableGuilds?.();if(!r)return;Object.keys(r).forEach(function(b){const u=r[b]?.channels?.find?.(function(A){return A.is_read===!1})?.id;u&&t.ack(u)}),a.showToast("\u2705 All messages marked as read!",{type:"success"})}catch(r){console.error("[Read All] \u274C Error:",r),a.showToast("\u274C Error marking messages as read.",{type:"danger"})}}},e.React.createElement(e.ReactNative.Text,{style:{color:"#FFFFFF",fontWeight:"bold"}},"\u{1F4E9}")))),c})}catch(t){console.error("[Read All] \u274C Plugin Load Error:",t),a.showToast("\u274C Plugin Load Failed!",{type:"danger"})}},y=function(){try{d&&(d(),a.showToast("\u2705 Plugin Successfully Unloaded!",{type:"success"}))}catch(t){console.error("[Read All] \u274C Unload Error:",t),a.showToast("\u274C Error during Unload!",{type:"danger"})}},h=f;return l.onLoad=R,l.onUnload=y,l.settings=h,l})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.plugin);
