(function(s,g,d,e,a,l){"use strict";const R=function(){const[t,n]=e.React.useState(l.storage.enableReadAll??!0);return e.React.createElement(e.ReactNative.View,{style:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#1E1E1E",padding:20}},e.React.createElement(e.ReactNative.Text,{style:{color:"#FFFFFF",fontSize:18,fontWeight:"bold",marginBottom:20}},"\u{1F4E9} Read All Messages Plugin"),e.React.createElement(e.ReactNative.Switch,{value:t,onValueChange:function(r){n(r),l.storage.enableReadAll=r}}),e.React.createElement(e.ReactNative.Text,{style:{color:"#AAAAAA",marginTop:10}},t?"\u2705 Enabled":"\u274C Disabled"))};let i;const f=function(){try{a.showToast("Loading Read All Messages Plugin...",{type:"info"});const t=d.findByProps("ack","ackMessage");if(!t){a.showToast("\u274C Failed to find Discord message functions.",{type:"danger"});return}console.log("[Read All] \u2705 Found ChannelActions:",t);const n=d.findByProps("Guilds","GuildsList");if(console.log("[Read All] \u{1F50D} Searching for GuildsComponent..."),!n?.Guilds){console.log("[Read All] \u274C Failed to find GuildsComponent."),a.showToast("\u274C Failed to find the server list UI.",{type:"danger"});return}console.log("[Read All] \u2705 Found GuildsComponent:",n),l.storage.enableReadAll===void 0&&(l.storage.enableReadAll=!0),console.log("[Read All] \u{1F539} Patching GuildsComponent..."),i=g.after("Guilds",n,function(r,c){let[p]=r;return!c?.props?.children||!l.storage.enableReadAll||(console.log("[Read All] \u{1F6E0} Inserting Button into GuildsComponent..."),c.props.children.unshift(e.React.createElement(e.ReactNative.View,{style:{padding:10}},e.React.createElement(e.ReactNative.TouchableOpacity,{style:{backgroundColor:"#5865F2",padding:10,borderRadius:5,alignItems:"center"},onPress:function(){try{const o=d.findByProps("getMutableGuilds")?.getMutableGuilds?.();if(!o){console.log("[Read All] \u274C No channels found.");return}console.log("[Read All] \u2705 Marking all messages as read..."),Object.keys(o).forEach(function(y){const u=o[y]?.channels?.find?.(function(F){return F.is_read===!1})?.id;u&&t.ack(u)}),a.showToast("\u2705 All messages marked as read!",{type:"success"})}catch(o){console.error("[Read All] \u274C Error:",o),a.showToast("\u274C Error marking messages as read.",{type:"danger"})}}},e.React.createElement(e.ReactNative.Text,{style:{color:"#FFFFFF"}},"\u{1F4E9} Read All Messages")))),console.log("[Read All] \u2705 Button added successfully.")),c})}catch(t){console.error("[Read All] \u274C Plugin Load Error:",t),a.showToast("\u274C Plugin Load Failed!",{type:"danger"})}},A=function(){try{i&&(i(),console.log("[Read All] \u{1F539} Unpatched successfully."),a.showToast("\u2705 Plugin Successfully Unloaded!",{type:"success"}))}catch(t){console.error("[Read All] \u274C Unload Error:",t),a.showToast("\u274C Error during Unload!",{type:"danger"})}},h=R;return s.onLoad=f,s.onUnload=A,s.settings=h,s})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.plugin);
