(function(t,g,s,l,n,a,c){"use strict";function R(){return l.React.createElement(c.Forms.FormSection,{title:"Read All Messages"},l.React.createElement(c.Forms.FormSwitchRow,{label:"Enable 'Read All Messages' Overlay Button",value:a.storage.enableReadAll,onValueChange:function(e){a.storage.enableReadAll=e}}))}let d;const f=function(){try{n.showToast("Loading Read All Messages Plugin...",{type:"info"});const e=s.findByProps("ack","ackMessage");if(!e){n.showToast("\u274C Failed to find Discord message functions.",{type:"danger"});return}console.log("[Read All] \u2705 Found ChannelActions:",e);const r=s.findByProps("Guilds","GuildsList");if(console.log("[Read All] \u{1F50D} Searching for GuildsComponent..."),!r?.Guilds){console.log("[Read All] \u274C Failed to find GuildsComponent."),n.showToast("\u274C Failed to find the server list UI.",{type:"danger"});return}console.log("[Read All] \u2705 Found GuildsComponent:",r),a.storage.enableReadAll===void 0&&(a.storage.enableReadAll=!0),console.log("[Read All] \u{1F539} Patching GuildsComponent..."),d=g.after("Guilds",r,function(y,u){let[C]=y;return!u?.props?.children||!a.storage.enableReadAll||(console.log("[Read All] \u{1F6E0} Inserting Button into GuildsComponent..."),u.props.children.unshift(l.React.createElement(l.ReactNative.View,{style:{padding:10}},l.React.createElement(l.ReactNative.TouchableOpacity,{style:{backgroundColor:"#5865F2",padding:10,borderRadius:5,alignItems:"center"},onPress:function(){try{const o=s.findByProps("getMutableGuilds")?.getMutableGuilds?.();if(!o){console.log("[Read All] \u274C No channels found.");return}console.log("[Read All] \u2705 Marking all messages as read..."),Object.keys(o).forEach(function(F){const i=o[F]?.channels?.find?.(function(p){return p.is_read===!1})?.id;i&&e.ack(i)}),n.showToast("\u2705 All messages marked as read!",{type:"success"})}catch(o){console.error("[Read All] \u274C Error:",o),n.showToast("\u274C Error marking messages as read.",{type:"danger"})}}},l.React.createElement(l.ReactNative.Text,{style:{color:"#FFFFFF"}},"\u{1F4E9} Read All Messages")))),console.log("[Read All] \u2705 Button added successfully.")),u})}catch(e){console.error("[Read All] \u274C Plugin Load Error:",e),n.showToast("\u274C Plugin Load Failed!",{type:"danger"})}},h=function(){try{d&&(d(),console.log("[Read All] \u{1F539} Unpatched successfully."),n.showToast("\u2705 Plugin Successfully Unloaded!",{type:"success"}))}catch(e){console.error("[Read All] \u274C Unload Error:",e),n.showToast("\u274C Error during Unload!",{type:"danger"})}},A=R;return t.onLoad=f,t.onUnload=h,t.settings=A,t})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.plugin,vendetta.ui.components);
