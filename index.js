(function(l,f,d,e,t,n,c){"use strict";function y(){const[a,s]=e.useState(n.storage.enableReadAll);return e.React.createElement(c.Forms.FormSection,{title:"Read All Messages Plugin"},e.React.createElement(c.Forms.FormSwitchRow,{label:"Enable 'Read All Messages' Overlay Button",value:a,onValueChange:function(o){n.storage.enableReadAll=o,s(o)}}))}let i;const R=function(){try{t.showToast("\u{1F4E5} Loading Read All Messages Plugin...",{type:"info"});const a=d.findByProps("ack","ackMessage");if(!a){t.showToast("\u274C Failed to find Discord functions.",{type:"danger"});return}n.storage.enableReadAll===void 0&&(n.storage.enableReadAll=!0);const s=d.findByProps("isOpen","pushLayer");if(!s){t.showToast("\u274C Failed to find overlay UI.",{type:"danger"});return}i=f.after("pushLayer",s,function(o,u){let[v]=o;return n.storage.enableReadAll?e.React.createElement(e.React.Fragment,null,u,e.React.createElement(e.ReactNative.View,{style:{position:"absolute",bottom:20,left:"50%",transform:[{translateX:-75}],backgroundColor:"#5865F2",padding:15,borderRadius:25,alignItems:"center",width:150,elevation:5}},e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:function(){try{const r=d.findByProps("getMutableGuilds")?.getMutableGuilds?.();if(!r)return;Object.keys(r).forEach(function(b){const g=r[b]?.channels?.find?.(function(E){return!E.is_read})?.id;g&&a.ack(g)}),t.showToast("\u2705 All messages marked as read!",{type:"success"})}catch(r){console.error("[Read All] Error:",r),t.showToast("\u274C Error marking messages as read.",{type:"danger"})}}},e.React.createElement(e.ReactNative.Text,{style:{color:"#FFFFFF",fontWeight:"bold",textAlign:"center"}},"\u{1F4E9} Read All Messages")))):u})}catch(a){console.error("[Read All] Plugin Load Error:",a),t.showToast("\u274C Plugin Load Failed!",{type:"danger"})}},h=function(){try{i&&(i(),t.showToast("\u2705 Plugin Successfully Unloaded!",{type:"success"}))}catch(a){console.error("[Read All] Unload Error:",a),t.showToast("\u274C Error during Unload!",{type:"danger"})}},F=y;return l.onLoad=R,l.onUnload=h,l.settings=F,l})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.plugin,vendetta.ui.components);
