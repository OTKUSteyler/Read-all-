(function(l,c,a,d,u){"use strict";function s(){const n=a.findByProps("ack","ackMessage");if(!n){console.error("[ReadAll] ERROR: ReadStateStore not found!");return}Object.keys(n.getUnreadCount()).forEach(function(t){n.ack(t)}),console.log("[ReadAll] Marked all messages as read.")}function i(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;console.log(`[ReadAll] Searching for Sidebar Component... (Attempt ${n})`);const t=a.findAll(function(){return!0});let e=null;for(const o of t){if(o&&typeof o=="object"){for(const r in o)if(r.toLowerCase().includes("sidebar")||r.toLowerCase().includes("guilds")){e=o[r];break}}if(e)break}return e?(console.log("[ReadAll] Sidebar Component found! Injecting button..."),f(e),e):n>=10?(console.error("[ReadAll] ERROR: Sidebar component still not found. Aborting."),null):setTimeout(function(){return i(n+1)},500)}function f(n){c.after("default",n,function(t,e){return e?e.props.children.find(function(o){return o?.props?.id==="readall-button"})?(console.log("[ReadAll] Button already exists. Skipping re-injection."),e):(e.props.children=[d.React.createElement("div",{id:"readall-button",style:{padding:10,marginBottom:10}},d.React.createElement(u.Button,{onClick:s,style:{width:"100%"}},"\u2705 Read All")),...e.props.children],e):(console.error("[ReadAll] ERROR: SidebarComponent returned empty."),e)}),console.log("[ReadAll] Button injected successfully.")}var g={onLoad:function(){console.log("[ReadAll] Plugin loaded! Scanning UI components..."),setTimeout(function(){return i()},2e3)},onUnload:function(){console.log("[ReadAll] Plugin unloaded!")}};return l.default=g,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.components);
