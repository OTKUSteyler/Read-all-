(function(o,f,d,e,a,n){"use strict";const R=function(){const[t,l]=e.React.useState(n.storage.enableReadAll??!0),i=function(){n.storage.enableReadAll=!t,l(!t)};return e.React.createElement(e.ReactNative.View,{style:{flex:1,justifyContent:"center",alignItems:"center"}},e.React.createElement(e.ReactNative.Text,{style:{fontSize:16,fontWeight:"bold",marginBottom:10}},"Enable Read All Messages"),e.React.createElement(e.ReactNative.Switch,{value:t,onValueChange:i}))};let c;const h=function(){try{const t=d.findByProps("ack","ackMessage");if(!t?.ack){console.error("[Read All] 'ack' function not found in ChannelActions:",t),a.showToast("Failed to find Discord message functions.",{type:"danger"});return}const l=d.findByProps("Guilds","GuildsList");if(!l?.Guilds){console.error("[Read All] 'Guilds' component not found in GuildsComponent:",l),a.showToast("Failed to find the server list UI.",{type:"danger"});return}n.storage.enableReadAll===void 0&&(n.storage.enableReadAll=!0),c=f.after("Guilds",l,function(i,r){let[b]=i;if(!r?.props?.children||!n.storage.enableReadAll)return r;const v=e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:function(){try{const s=d.findByProps("getGuilds")?.getGuilds?.();if(!s){console.error("[Read All] No guilds found.");return}Object.values(s).forEach(function(E){const u=E.channels;u&&Object.values(u).forEach(function(g){g.is_read||t.ack(g.id)})}),a.showToast("All messages marked as read!",{type:"success"})}catch(s){console.error("[Read All] Error marking messages as read:",s),a.showToast("Error marking messages as read.",{type:"danger"})}},style:{marginBottom:10,padding:10,backgroundColor:"#5865F2",borderRadius:8,alignItems:"center"}},e.React.createElement(e.ReactNative.Text,{style:{color:"#FFFFFF",fontWeight:"bold"}},"\u{1F4E9} Read All"));return r.props.children.unshift(v),r}),console.log("[Read All] Plugin loaded successfully.")}catch(t){console.error("[Read All] Plugin Load Error:",t),a.showToast("Plugin Load Failed!",{type:"danger"})}},y=function(){try{c&&(c(),a.showToast("Plugin Successfully Unloaded!",{type:"success"}))}catch(t){console.error("[Read All] Unload Error:",t),a.showToast("Error during Unload!",{type:"danger"})}},A=R;return o.onLoad=h,o.onUnload=y,o.settings=A,o})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.plugin);
