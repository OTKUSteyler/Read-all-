(function(s,n,a,r,f,h){"use strict";const{FormSwitch:g}=h.Forms;function R(){return n.React.createElement(g,{label:"Mark DMs as Read",value:r.storage.markDMs,onValueChange:function(e){return r.storage.markDMs=e}})}const{View:k,TouchableOpacity:y,Text:m,StyleSheet:v}=n.ReactNative;r.storage.markDMs===void 0&&(r.storage.markDMs=!0);const c=a.findByProps("ack","markChannelRead"),b=a.findByProps("getGuilds"),C=a.findByProps("getSortedPrivateChannels"),d=a.findByProps("hasUnread"),E=function(){if(!c?.markChannelRead)return;let e=0;const o=b?.getGuilds();if(o&&Object.keys(o).forEach(function(t){d?.hasUnread(t)&&(c.markChannelRead(t),e++)}),r.storage.markDMs){const t=C?.getSortedPrivateChannels();t&&t.forEach(function(l){d?.hasUnread(l.channel.id)&&(c.markChannelRead(l.channel.id),e++)})}console.log(`[ReadAll] Marked ${e} channels as read.`)};let i=null;const S=function(){const e=a.findByName("Guilds",!1);if(!e)return console.error("[ReadAll] Failed to find Sidebar!"),null;const o=function(){return n.React.createElement(y,{style:u.button,onPress:E},n.React.createElement(m,{style:u.text},"\u2714 Read All"))},t=e.default;function l(P){return n.React.createElement(k,{style:{flexDirection:"column"}},n.React.createElement(o,null),n.React.createElement(t,P))}return e.default=l,function(){e.default=t}},M=function(){f.registerSettings("read-all-settings",R),i=S()},D=function(){i&&i()},u=v.create({button:{paddingVertical:10,marginHorizontal:8,backgroundColor:"#5865F2",borderRadius:6,alignItems:"center"},text:{color:"white",fontWeight:"600",fontSize:14}});return s.onLoad=M,s.onUnload=D,s})({},vendetta.metro.common,vendetta.metro,vendetta.plugin,vendetta.settings,vendetta.ui.components);
