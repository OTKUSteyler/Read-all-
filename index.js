(function(r,u,s,t,e,d,g){"use strict";const{FormSwitch:f}=g.Forms;function h(){return React.createElement(f,{label:"Enable Read All Button",value:d.storage.enabled??!0,onValueChange:function(n){d.storage.enabled=n}})}let o;const y=function(){try{e.showToast("Loading Read All Messages Plugin...",{type:"info"});const n=s.findByProps("ack","ackMessage");if(!n){e.showToast("Failed to find Discord functions.",{type:"danger"});return}const i=s.findByProps("Guilds","GuildsList");if(!i?.Guilds){e.showToast("Failed to find the server list UI.",{type:"danger"});return}o=u.after("Guilds",i,function(F,l){let[T]=F;return l?.props?.children&&(l.props.children.unshift(t.React.createElement(t.ReactNative.View,{style:{padding:10}},t.React.createElement(t.ReactNative.TouchableOpacity,{style:{backgroundColor:"#5865F2",padding:10,borderRadius:5,alignItems:"center"},onPress:function(){try{const a=s.findByProps("getMutableGuilds")?.getMutableGuilds?.();if(!a)return;Object.keys(a).forEach(function(w){const c=a[w]?.channels?.find?.(function(E){return E.is_read===!1})?.id;c&&n.ack(c)}),e.showToast("All messages marked as read!",{type:"success"})}catch(a){console.error("[Read All] Error:",a),e.showToast("Error marking messages as read.",{type:"danger"})}}},t.React.createElement(t.ReactNative.Text,{style:{color:"#FFFFFF"}},"\u{1F4E9} Read All Messages")))),e.showToast("Read All Messages Button Added!",{type:"success"})),l})}catch(n){console.error("[Read All] Plugin Load Error:",n),e.showToast("Plugin Load Failed!",{type:"danger"})}},p=function(){try{e.showToast("Unloading Read All Messages Plugin...",{type:"info"}),o&&(o(),e.showToast("Plugin Successfully Unloaded!",{type:"success"}))}catch(n){console.error("[Read All] Unload Error:",n),e.showToast("Error during Unload!",{type:"danger"})}},R=h;return r.onLoad=y,r.onUnload=p,r.settings=R,r})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.plugin,vendetta.ui.components);
