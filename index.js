(function(l,g,s,e,a,n,c){"use strict";function f(){return e.React.createElement(c.Forms.FormSection,{title:"Read All Messages"},e.React.createElement(c.Forms.FormSwitchRow,{label:"Enable 'Read All Messages' Overlay Button",value:n.storage.enableReadAll,onValueChange:function(t){n.storage.enableReadAll=t}}))}let o;const R=function(){try{a.showToast("Loading Read All Messages Plugin...",{type:"info"});const t=s.findByProps("ack","ackMessage");if(!t){a.showToast("Failed to find Discord functions.",{type:"danger"});return}const d=s.findByProps("Guilds","GuildsList");if(console.log("[Read All] GuildsComponent:",d),!d?.Guilds){a.showToast("Failed to find the server list UI.",{type:"danger"});return}n.storage.enableReadAll===void 0&&(n.storage.enableReadAll=!0),o=g.after("Guilds",d,function(F,i){let[b]=F;return!i?.props?.children||!n.storage.enableReadAll||i.props.children.unshift(e.React.createElement(e.ReactNative.View,{style:{padding:10}},e.React.createElement(e.ReactNative.TouchableOpacity,{style:{backgroundColor:"#5865F2",padding:10,borderRadius:5,alignItems:"center"},onPress:function(){try{const r=s.findByProps("getMutableGuilds")?.getMutableGuilds?.();if(!r)return;Object.keys(r).forEach(function(p){const u=r[p]?.channels?.find?.(function(A){return A.is_read===!1})?.id;u&&t.ack(u)}),a.showToast("All messages marked as read!",{type:"success"})}catch(r){console.error("[Read All] Error:",r),a.showToast("Error marking messages as read.",{type:"danger"})}}},e.React.createElement(e.ReactNative.Text,{style:{color:"#FFFFFF"}},"\u{1F4E9} Read All Messages")))),i})}catch(t){console.error("[Read All] Plugin Load Error:",t),a.showToast("Plugin Load Failed!",{type:"danger"})}},y=function(){try{o&&(o(),a.showToast("Plugin Successfully Unloaded!",{type:"success"}))}catch(t){console.error("[Read All] Unload Error:",t),a.showToast("Error during Unload!",{type:"danger"})}},h=f;return l.onLoad=R,l.onUnload=y,l.settings=h,l})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.plugin,vendetta.ui.components);
